<!DOCTYPE html>
<html>
  <head>
    <title>embed</title>
    <script type="text/javascript">
      window.onload = function() {
        function loadGist(element, gistId) {
          var callbackName = "gist_callback";
          var script = document.createElement("script");
          window[callbackName] = function (gistData) {
            try { delete window[callbackName]; } catch(e) { window[callbackName] = undefined; }
            var html = '<link rel="stylesheet" href="' + gistData.stylesheet + '"></link>';
            html += gistData.div;
            element.innerHTML = html;
            (script.parentNode || document.body).removeChild(script);
          };
          script.setAttribute("src", gistId + ".json?callback=" + callbackName);
          document.body.appendChild(script);
        }

        var script = document.createElement("script");
        var loc = document.location.toString();
        var p1 = loc.substr(loc.lastIndexOf('?loc=') + 5);
        
        if (p1.lastIndexOf('#') > p1.lastIndexOf('/')) {
          p1 = p1.substr(0, p1.lastIndexOf('#'));
        }
        if (p1.lastIndexOf('.') > p1.lastIndexOf('/')) {
          p1 = p1.substr(0, p1.lastIndexOf('.'));
        }
        
        loadGist(document.body, p1);
      };
    </script>
    <style type="text/css">
      body {
        margin: 0;
      }
      .hsn {
        color: #dfdfdf;
        font-size: 12px;
        font-family: Verdana,Arial,Helvetica,sans-serif;
      }
    </style>
  </head>
  <body>
    <span class="hsn">Loading gist... Just let it happen.</span>
  </body>
</html>
